<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:form="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <title>Подать объявление</title>
    <link type="text/css" rel="stylesheet" href="/css/style.css"/>
    <base href="/">
</head>

<header>
    <div class="header">
        <a th:href="@{/index}"> Главная</a>
        <a th:href="@{/newadv}"> Подать объявление</a>
        <a th:if="${#httpServletRequest.remoteUser} != null" th:href="@{/lk}"> Личный кабинет</a>


        <div class="header-greeting">
            <p th:if="${#httpServletRequest.remoteUser} != null" th:inline="text">Hello
                [[${#httpServletRequest.remoteUser}]]!</p>
        </div>

        <div class="header-right">

            <form th:name="logout" th:if="${#httpServletRequest.remoteUser} != null" th:action="@{/logout}"
                  method="post">
                <input type="submit" value="Sign Out"/>
            </form>

            <form th:name="login" th:if="${#httpServletRequest.remoteUser} == null" th:action="@{/login}" method="post">
                <input type="submit" value="Sign In"/>
            </form>
        </div>
    </div>
    <hr>
</header>


<div class="mid">
<body>
<br><br>
<a th:if="${advert.getBrandId()} == null">
    <form name='f' th:action="@{/newadv}" th:object="${advert}" method='POST'>
        <table>

            <tr>
                <td>Название объявления <br><input type="text" th:field="*{title}"/></td>
            </tr>

            <tr>
                <td>Описание <br> <input type="text" th:field="*{description}"/></td>
            </tr>
            <br>
            <tr>
                <td>Select brand:
                    <div class="styled-select green semi-square">
                        <select  th:field="*{brandId}" onselect="this.form.submit()">
                            <option value=""> --</option>
                            <option th:each="brand : ${brands}"
                                    th:value="${brand.brandId}"
                                    th:utext="${brand.name}">
                            </option>
                        </select>
                    </div>
                </td>
            </tr>

        </table>
        <input type="submit" value="Apply"/>
    </form>
</a>

<a th:if="${advert.getBrandId()} !=null">
    <a th:if="${advert.getModelId()} ==null">
        <form name='selected brand' th:action="@{'/newadv/'+ brandParam}" th:object="${advert}" method='POST'>
            <table>
                <tr>
                    <a> Название объявления:
                        <div th:text="${advert.getTitle()}"/>
                    </a>
                </tr>

                <tr>
                    <a> Описание:
                        <div th:text="${advert.getDescription()}"/>
                    </a>
                </tr>


                <tr>
                    <a> Brand
                        <div th:text="${advert.getBrandId()}"/>
                    </a>
                </tr>

                <tr>
                    <td>Select model:
                        <select th:field="*{modelId}">
                            <option value=""> --</option>
                            <option th:each="model : ${models}"
                                    th:value="${model.modelId}"
                                    th:utext="${model.name}"></option>
                        </select>
                    </td>
                </tr>
            </table>
            <input type="submit" value="Apply"/>
        </form>
    </a>
</a>


<a th:if="${advert.getModelId()} !=null">
    <form name='charact' th:action="@{'/newadv/'+ brandParam + '/' + modelParam}" th:object="${advert}" method='POST'>
        <table>
            <tr>
                <a> Название объявления:
                    <div th:text="${advert.getTitle()}"/>
                </a>
            </tr>

            <tr>
                <a> Описание:
                    <div th:text="${advert.getDescription()}"/>
                </a>
            </tr>


            <tr>
                <a> Выбранная марка
                    <div th:text="${advert.getBrandId()}"/>
                </a>
            </tr>

            <tr>
                <a> Выбранная модель
                    <div th:text="${advert.getModelId()}"/>
                </a>
            </tr>

            <tr>
                <td>Выберите комплетацию автомобиля:
                    <select th:field="*{charactId}">
                        <option value=""> --</option>
                        <option th:each="charact : ${charact}"
                                th:value="${charact.charactId}"
                                th:utext="${charact.body} + ' ' +  ${charact.transmission} +
                                ' ' + ${charact.driveUnit} + ' ' + ${charact.power}"></option>
                    </select>
                </td>
            </tr>

            <tr>
                <td>Пробег:<input type="number" th:field="${advert.mileage}"/></td>
            </tr>
            <tr>
                <td>Год выпуска:<input type="number" th:field="${advert.factYear}"/></td>
            </tr>
            <tr>
                <td>Цена:<input type="number" th:field="${advert.costVal}"/></td>
            </tr>

        </table>
        <input type="submit" value="Apply"/>
    </form>
</a>


</body>
</div>
</html>