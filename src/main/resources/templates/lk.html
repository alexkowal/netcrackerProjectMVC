<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>LK</title>
</head>

<header>
    <a th:if="${#httpServletRequest.remoteUser} != null" th:href="@{/newadv}"> Подать объявление</a>
    <a th:if="${#httpServletRequest.remoteUser} != null" th:href="@{/index}"> Главная</a>

    <h1 th:inline="text">Hello [[${#httpServletRequest.remoteUser}]]!</h1>

    <form th:if="${#httpServletRequest.remoteUser} != null" th:action="@{/logout}" method="post">
        <input type="submit" value="Sign Out"/>
    </form>
</header>


<body>


<p>Ваш логин
<div th:text="${login}"></div>
</p>
<p>Ваше имя
<p th:text="${username}"> Имя</p></p>
<p>Ваш email
<p th:text="${email}"> Почта</p></p>
<p></p>


<H1> Ваши объявления</H1>

<tr th:each="advert : ${adverts}">
    <td>
        <p th:text="${advert.getTitle()}"</p>
    </td>


    <table>
        <tr
                th:each="pict: ${pictures}"
                th:if="${pict.getAdvertId()}!=null and ${pict.getAdvertId()} == ${advert.getAdvId()}">
            <img th:src="@{'/img/' + ${pict.getPath()}}" th:width="120" th:height="100" hspace="10"
                 vspace="10"/>
        </tr>
    </table>


</tr>
<H1>Избранное</H1>
<tr th:each="mark : ${marks}">
    <a th:href="@{'/showadv/' + ${advertRepo.findByAdvId(mark.getAdvId()).getAdvId()}}"
       th:text="${advertRepo.findByAdvId(mark.getAdvId()).getTitle()}"></a><br>
</tr>
</body>
</html>